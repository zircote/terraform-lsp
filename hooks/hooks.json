{
    "hooks": [
        {
            "name": "terraform-fmt-on-edit",
            "event": "afterWrite",
            "hooks": [
                {
                    "type": "command",
                    "command": "terraform fmt \"$CLAUDE_FILE_PATH\" 2>/dev/null || true"
                }
            ],
            "matcher": "**/*.tf"
        },
        {
            "name": "terraform-validate-on-edit",
            "event": "afterWrite",
            "hooks": [
                {
                    "type": "command",
                    "command": "cd \"$(dirname \"$CLAUDE_FILE_PATH\")\" && terraform validate 2>&1 | head -20 || true"
                }
            ],
            "matcher": "**/*.tf"
        },
        {
            "name": "terraform-init-check",
            "event": "afterWrite",
            "hooks": [
                {
                    "type": "command",
                    "command": "cd \"$(dirname \"$CLAUDE_FILE_PATH\")\" && [ ! -d .terraform ] && echo '  terraform init required - run: terraform init' || true"
                }
            ],
            "matcher": "**/*.tf"
        },
        {
            "name": "tflint-on-edit",
            "event": "afterWrite",
            "hooks": [
                {
                    "type": "command",
                    "command": "command -v tflint >/dev/null && cd \"$(dirname \"$CLAUDE_FILE_PATH\")\" && tflint --format compact 2>&1 | head -30 || true"
                }
            ],
            "matcher": "**/*.tf"
        },
        {
            "name": "trivy-on-edit",
            "event": "afterWrite",
            "hooks": [
                {
                    "type": "command",
                    "command": "command -v trivy >/dev/null && cd \"$(dirname \"$CLAUDE_FILE_PATH\")\" && trivy config --severity HIGH,CRITICAL --exit-code 0 . 2>&1 | head -30 || true"
                }
            ],
            "matcher": "**/*.tf"
        },
        {
            "name": "checkov-on-edit",
            "event": "afterWrite",
            "hooks": [
                {
                    "type": "command",
                    "command": "command -v checkov >/dev/null && checkov -f \"$CLAUDE_FILE_PATH\" --compact --quiet 2>&1 | head -30 || true"
                }
            ],
            "matcher": "**/*.tf"
        },
        {
            "name": "terraform-docs-hint",
            "event": "afterWrite",
            "hooks": [
                {
                    "type": "command",
                    "command": "command -v terraform-docs >/dev/null && [ -f \"$(dirname \"$CLAUDE_FILE_PATH\")/README.md\" ] && echo \"  Update docs: terraform-docs markdown . --output-file README.md\" || true"
                }
            ],
            "matcher": "**/variables.tf"
        },
        {
            "name": "terraform-plan-hint",
            "event": "afterWrite",
            "hooks": [
                {
                    "type": "command",
                    "command": "echo \"  Preview changes: terraform plan\" || true"
                }
            ],
            "matcher": "**/main.tf"
        },
        {
            "name": "terraform-todo-fixme",
            "event": "afterWrite",
            "hooks": [
                {
                    "type": "command",
                    "command": "grep -nE '(TODO|FIXME|XXX|HACK):?' \"$CLAUDE_FILE_PATH\" 2>/dev/null | head -10 || true"
                }
            ],
            "matcher": "**/*.tf"
        },
        {
            "name": "terraform-sensitive-check",
            "event": "afterWrite",
            "hooks": [
                {
                    "type": "command",
                    "command": "grep -inE '(password|secret|api_key|access_key|private_key)\\s*=' \"$CLAUDE_FILE_PATH\" 2>/dev/null && echo '  Sensitive data detected - ensure using sensitive = true or secrets manager' || true"
                }
            ],
            "matcher": "**/*.tf"
        },
        {
            "name": "tfvars-fmt-on-edit",
            "event": "afterWrite",
            "hooks": [
                {
                    "type": "command",
                    "command": "terraform fmt \"$CLAUDE_FILE_PATH\" 2>/dev/null || true"
                }
            ],
            "matcher": "**/*.tfvars"
        },
        {
            "name": "tfvars-sensitive-check",
            "event": "afterWrite",
            "hooks": [
                {
                    "type": "command",
                    "command": "grep -inE '(password|secret|api_key|access_key|private_key)\\s*=' \"$CLAUDE_FILE_PATH\" 2>/dev/null && echo '  Sensitive values detected - ensure this file is in .gitignore' || true"
                }
            ],
            "matcher": "**/*.tfvars"
        },
        {
            "name": "terraform-cost-hint",
            "event": "afterWrite",
            "hooks": [
                {
                    "type": "command",
                    "command": "command -v infracost >/dev/null && echo \"  Cost estimate: infracost breakdown --path .\" || true"
                }
            ],
            "matcher": "**/main.tf"
        },
        {
            "name": "terragrunt-fmt-on-edit",
            "event": "afterWrite",
            "hooks": [
                {
                    "type": "command",
                    "command": "command -v terragrunt >/dev/null && terragrunt hclfmt \"$CLAUDE_FILE_PATH\" 2>/dev/null || true"
                }
            ],
            "matcher": "**/terragrunt.hcl"
        },
        {
            "name": "terragrunt-validate",
            "event": "afterWrite",
            "hooks": [
                {
                    "type": "command",
                    "command": "command -v terragrunt >/dev/null && cd \"$(dirname \"$CLAUDE_FILE_PATH\")\" && terragrunt validate 2>&1 | head -20 || true"
                }
            ],
            "matcher": "**/terragrunt.hcl"
        },
        {
            "name": "terraform-lock-outdated",
            "event": "afterWrite",
            "hooks": [
                {
                    "type": "command",
                    "command": "echo \"  Update providers: terraform init -upgrade\" || true"
                }
            ],
            "matcher": "**/.terraform.lock.hcl"
        },
        {
            "name": "markdown-lint-on-edit",
            "event": "afterWrite",
            "hooks": [
                {
                    "type": "command",
                    "command": "command -v markdownlint >/dev/null && markdownlint \"$CLAUDE_FILE_PATH\" 2>&1 | head -20 || true"
                }
            ],
            "matcher": "**/*.md"
        }
    ]
}
